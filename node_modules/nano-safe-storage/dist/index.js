var s={},g={getItem:t=>s[t]??null,setItem:(t,n)=>{s[t]=n},removeItem:t=>{delete s[t]},clear:()=>{for(let t in s)delete s[t]}};function m(){try{if(typeof window<"u"&&window.localStorage){let t="__nano_safe_test__";return window.localStorage.setItem(t,t),window.localStorage.removeItem(t),window.localStorage}}catch{}return g}var l=m();function d(t={}){let{prefix:n="",ttl:f}=t,c=e=>`${n}${e}`;return{set(e,r,a){try{let i=a?.ttl??f,u={value:r,expiry:i?Date.now()+i*1e3:void 0};l.setItem(c(e),JSON.stringify(u))}catch(i){console.warn(`nano-safe-storage: set failed for key "${e}"`,i)}},get(e){try{let r=l.getItem(c(e));if(r===null)return null;let a=JSON.parse(r);return a.expiry&&Date.now()>a.expiry?(this.remove(e),null):a.value}catch{return null}},remove(e){try{l.removeItem(c(e))}catch(r){console.warn(`nano-safe-storage: remove failed for key "${e}"`,r)}},has(e){return this.get(e)!==null},clear(){try{n&&typeof window<"u"&&window.localStorage?Object.keys(localStorage).filter(r=>r.startsWith(n)).forEach(r=>localStorage.removeItem(r)):l.clear()}catch(e){console.warn("nano-safe-storage: clear failed",e)}},isAvailable(){return l!==g}}}var o=d(),{set:y,get:S,remove:p,has:v,clear:w}={set:o.set.bind(o),get:o.get.bind(o),remove:o.remove.bind(o),has:o.has.bind(o),clear:o.clear.bind(o)},b=d;export{w as clear,d as createStorage,b as default,S as getItem,v as has,p as removeItem,y as setItem};
//# sourceMappingURL=index.js.map