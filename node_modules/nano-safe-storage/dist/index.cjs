"use strict";var d=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var p=Object.prototype.hasOwnProperty;var v=(e,r)=>{for(var a in r)d(e,a,{get:r[a],enumerable:!0})},w=(e,r,a,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let t of S(r))!p.call(e,t)&&t!==a&&d(e,t,{get:()=>r[t],enumerable:!(s=y(r,t))||s.enumerable});return e};var b=e=>w(d({},"__esModule",{value:!0}),e);var $={};v($,{clear:()=>_,createStorage:()=>f,default:()=>k,getItem:()=>I,has:()=>O,removeItem:()=>T,setItem:()=>x});module.exports=b($);var i={},u={getItem:e=>i[e]??null,setItem:(e,r)=>{i[e]=r},removeItem:e=>{delete i[e]},clear:()=>{for(let e in i)delete i[e]}};function h(){try{if(typeof window<"u"&&window.localStorage){let e="__nano_safe_test__";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),window.localStorage}}catch{}return u}var c=h();function f(e={}){let{prefix:r="",ttl:a}=e,s=t=>`${r}${t}`;return{set(t,o,l){try{let g=l?.ttl??a,m={value:o,expiry:g?Date.now()+g*1e3:void 0};c.setItem(s(t),JSON.stringify(m))}catch(g){console.warn(`nano-safe-storage: set failed for key "${t}"`,g)}},get(t){try{let o=c.getItem(s(t));if(o===null)return null;let l=JSON.parse(o);return l.expiry&&Date.now()>l.expiry?(this.remove(t),null):l.value}catch{return null}},remove(t){try{c.removeItem(s(t))}catch(o){console.warn(`nano-safe-storage: remove failed for key "${t}"`,o)}},has(t){return this.get(t)!==null},clear(){try{r&&typeof window<"u"&&window.localStorage?Object.keys(localStorage).filter(o=>o.startsWith(r)).forEach(o=>localStorage.removeItem(o)):c.clear()}catch(t){console.warn("nano-safe-storage: clear failed",t)}},isAvailable(){return c!==u}}}var n=f(),{set:x,get:I,remove:T,has:O,clear:_}={set:n.set.bind(n),get:n.get.bind(n),remove:n.remove.bind(n),has:n.has.bind(n),clear:n.clear.bind(n)},k=f;0&&(module.exports={clear,createStorage,getItem,has,removeItem,setItem});
//# sourceMappingURL=index.cjs.map