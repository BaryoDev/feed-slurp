"use strict";var a=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var g=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var T=(t,e)=>{for(var r in e)a(t,r,{get:e[r],enumerable:!0})},A=(t,e,r,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of g(e))!P.call(t,n)&&n!==r&&a(t,n,{get:()=>e[n],enumerable:!(o=I(e,n))||o.enumerable});return t};var k=t=>A(a({},"__esModule",{value:!0}),t);var U={};T(U,{default:()=>M,resilientFetch:()=>x});module.exports=k(U);function q(t,e,r){if(r==="exponential"){let o=e*Math.pow(2,t-1),n=Math.random()*.3*o;return o+n}return e}var D=(t,e)=>e?e.status>=500:!0;async function x(t,e={}){let{retries:r=3,retryDelay:o=1e3,timeout:n=5e3,backoff:l="fixed",retryOn:c=D,onRequest:f,onResponse:p,onError:m,...R}=e,i=0,w=t.toString(),b=R;for(f&&(b=await f(w,R));;){let d=new AbortController,y=setTimeout(()=>d.abort(),n);try{let s=await fetch(w,{...b,signal:d.signal});if(clearTimeout(y),!s.ok){if(i<r&&c(null,s)){i++;let h=q(i,o,l);await new Promise(u=>setTimeout(u,h));continue}throw new Error(`Request failed with status ${s.status}`)}return p?await p(s):s}catch(s){clearTimeout(y),i++;let u=s.name==="AbortError"?new Error("Request timed out"):s;if(m&&m(u),i<=r&&c(u,null)){let E=q(i,o,l);await new Promise(O=>setTimeout(O,E));continue}throw u}}}var M=x;0&&(module.exports={resilientFetch});
//# sourceMappingURL=index.cjs.map